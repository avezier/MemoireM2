\chapter{Préliminaires}

\section{Algèbre commutative}

On collecte dans cette partie des définitions et résultats d'algèbre commutative utilisés dans la suite. Soit $A$ un anneau, $\mathfrak{p}$ un idéal premier de $A$, et $f\in A$ un élément. On note $A_\mathfrak{p}$ la localisation de $A$ en la partie multiplicative $A\setminus \mathfrak{p}$, et $A_f$ la localisation de $A$ en la partie multiplicative $\lbrace 1, f, f^2, ....\rbrace$.


\subsection{Décomposition primaire des modules noetheriens}

On fixe dans cette partie un $A$-module non-nul $M$ de type fini avec $A$ noetherien. On pense par exemple à $A/\mathfrak{a}$, où $\mathfrak{a}$ est un idéal de $A$.

\begin{defn}[Idéal premier associé]
Un idéal premier $\mathfrak{p}\subset A$ est dit associé à $M$ si c'est l'annulateur $\ann(m)$ d'un élément $m\in M$. Si $M$ est de la forme $A/\mathfrak{a}$, on parle d'idéal premier associé à $\mathfrak{a}$. On note $\assp_AM$ l'ensemble des idéaux premiers associés à $M$. Les éléments minimaux de $\assp_AM$ sont appelés premiers isolés, les autres sont appelés premiers immergés.
\end{defn}

\begin{ex}
$A=k[x,y], M=A/(xy),\mathfrak{p}=(x)=\ann(\bar{y})=((xy):y)$.
\end{ex}

\begin{defn}[Élément $M$-régulier]
Un élément $x\in A$ est $M$-régulier si la multiplication par $x$ est un endomorphisme injectif de $M$, c'est à dire que $x$ n'est pas diviseur de zéro d'un élément de $M$. Si $x$ n'est pas régulier on dit que c'est un diviseur de zéro de $M$.
\end{defn}

\begin{defn}[Support d'un module]
Le support de $M$ est l'ensemble des idéaux premiers tels que $M_p\neq \lbrace 0\rbrace$.
\end{defn}

\begin{prop}\label{AssociatedPrimesProp1}
\begin{enumerate}
\item $\assp_A M$ est non-vide et fini.
\item $\assp_A M\subset \supp M$ et leurs éléments minimaux coïncident.
\item L'union des idéaux premiers associés à $M$ est l'ensemble des diviseurs de zéro de $M$.
\end{enumerate}
\end{prop}

\begin{prop}
Soient $\mathfrak{a}_1,...\mathfrak{a}_n, \mathfrak{b}$ des idéaux d'un anneau $B$, avec $\mathfrak{b}\subset \cup_{1\leq i\leq n}\mathfrak{a}_i$. Si au plus deux des $\mathfrak{a}_i$ ne sont pas premiers, alors $\mathfrak{b}$ est contenu dans au moins un idéal $\mathfrak{a}_i$, $1\leq i\leq n$.
\end{prop}

\begin{cor}\label{AssociatedPrimesProp2}
Tout idéal constitué de diviseurs de zéros de $M$ annule au moins un élément de $M$.
\end{cor}

\begin{defn}[sous-module primaire]
Un sous-module $N\subset M$ est dit primaire si $\assp_A(M/N)$ est réduit à un seul idéal premier $\mathfrak{p}$. On dit alors qu'il est $\mathfrak{p}$-primaire.
\end{defn}

\begin{prop}
Les assertions suivantes sont équivalentes
\begin{enumerate}
\item $N\subset M$ est $\mathfrak{p}$-primaire.
\item $\mathfrak{p}$ est minimal sur $\ann(M/N)$ et tout élément en dehors de $\mathfrak{p}$ est $M/N$-régulier.
\item Une puissance de $\mathfrak{p}$ annule $M/N$ et tout élément en dehors de $\mathfrak{p}$ est $M/N$-régulier.
\end{enumerate}
\end{prop}

\begin{rem}
Ainsi pour un sous-module $\mathfrak{p}$-primaire $N$ de $M$, on a $\mathfrak{p}\subset \sqrt{\ann(M/N)}$. Or on aussi $\ann(M/N)\subset \mathfrak{p}$. D'où $\mathfrak{p}=\sqrt{\ann(M/N)}$. On a ainsi pour tout $a\in A$
$$a\text{ est diviseur de zéro de } M/N \implies a\in\sqrt{\ann(M/N)}$$
Réciproquement, si cette assertion est vérifiée pour un sous-module $N$, alors $\sqrt{\ann(M/N)}$ est l'ensemble des diviseurs de zéro de $M/N$, et on a $\assp_A(M/N)=\lbrace \mathfrak{p}:=\sqrt{\ann(M/N)}\rbrace$, ce qui montre que $N$ est $\mathfrak{p}$-primaire. Avec $M=A$ et $N=\mathfrak{a}$ un idéal de $A$ on retrouve la définition plus classique
$$\mathfrak{a}\text{ est }\mathfrak{p}\text{-primaire} \iff (x\in A,\, y\in A\setminus\mathfrak{a},\,xy\in\mathfrak{a}\implies x\in \sqrt{\mathfrak{a}})=\mathfrak{p}$$
\end{rem}

Un sous-module $N$ est dit irréductible si on ne peut pas l'écrire comme une intersections de sous-modules qui le contiennent strictement. Une décomposition irréductible de $N$ est une écriture $N=N_1\cap...\cap N_r$ avec $N_i$ irréductible pour tout $i$. Cette écriture n'est pas unique en général, même si elle est réduite, c'est à dire qu'on ne peut ôter aucun facteur. 

\begin{thm}
\begin{enumerate}
\item Un sous-module irréductible est primaire.
\item Tout sous-module admet une décomposition irréductible.
\item Soit $N$ un sous-module de $M$, et $N=N_1\cap...\cap N_r$ une décomposition irréductible réduite. Alors $\lbrace N_1,...,N_r\rbrace\rightarrow \assp M/N, N_i\mapsto \assp(M/N_i)$ définit une application surjective.
\item Dans l'assertion précédente, si la décomposition est minimale en nombre de termes, l'application est une bijection.
\end{enumerate}
\end{thm}

\subsection{Extensions entières d'anneaux}

Soit $f:A\rightarrow B$ une extension d'anneau. Un élément $b\in B$ est dit entier sur $A$ si il existe un polynôme irréductible unitaire $P$ de $A[x]$ tel que $P^f(b)=0$, où $P^f$ désigne l'image de $P$ par l'application canonique $f:A[x]\rightarrow B[x]$. L'extension $f:A\rightarrow B$ est dite entière si $B$ est constitué d'éléments entiers sur $A$.

\begin{prop}
Les assertions suivantes sont équivalentes
\begin{enumerate}
\item $b\in B$ est entier sur $A$.
\item $A[b]$ est un $A$-module de type fini.
\item Il existe un $A[b]$-module $M$ qui est fidèle et de type fini en tant que $A$-module.
\end{enumerate}
\end{prop}

Ainsi, l'ensemble des éléments de $B$ entiers sur $A$ forment un sous-anneau de $B$, c'est la clôture intégrale de $A$ dans $B$, notée $\overline{A_B}$. Si $\overline{A_B}=B$, on dit que $A$ est intégralement clos dans $B$. Dans le cas où $A$ est intègre et $B=\fract A$, on dit tout simplement intégralement clos. Si $A$ n'est pas intègre, remarquons qu'il existe une notion plus générale qu'il est utile de mentionner pour la consistance avec la terminologie de variété normale que nous verrons plus loin. Pour un anneau quelconque $A$, on dit que $A$ est normal si tout localisé de $A$ en un idéal premier est un anneau intégralement clos. On note qu'un anneau intègre est intégralement clos si et seulement si il est normal (\cite{atiyahmacdo} 5.13). Mentionnons que nous ne rencontrerons pas dans ce mémoire d'anneaux normaux non-intègres, donc la définition ci-dessus sera suffisante.

\begin{cor}
Soit $B$ une $A$-algèbre de type fini. Alors $B$ est entière sur $A$ si et seulement si elle est finie.
\end{cor}

\begin{defn}[Hauteur d'un idéal premier]
La hauteur d'un idéal premier $\mathfrak{p}\subset A$, notée $\haut \mathfrak{p}$, est la borne supérieure des longueurs de chaînes d'idéaux premiers
$$\mathfrak{p}_0=\mathfrak{p}\varsupsetneq \mathfrak{p}_1 \varsupsetneq...\varsupsetneq  \mathfrak{p}_r$$
\end{defn}


\begin{thm}\label{factonormal}
Soit $A$ un anneau intègre noetherien intégralement clos. Alors
\begin{enumerate}
\item Tous les idéaux premiers associés d'un idéal principal non-nul sont de hauteur 1.
\item $A$ est l'intersection des localisés $A_\mathfrak{p}$, où $\mathfrak{p}$ parcourt les idéaux premiers de hauteur $1$.
\end{enumerate}
\end{thm}
\begin{proof}
Voir \cite{Matsumura} 11.5
\end{proof}


\begin{thm}\label{UFDPID}
Soit $A$ un anneau noetherien intégralement clos. Alors,
$A$ est factoriel si et seulement si tout idéal premier de hauteur $1$ est principal.
\end{thm}
\begin{proof}
Voir \cite{Matsumura} 20.1
\end{proof}

\begin{thm}[Critère de Serre pour la normalité]\label{SerreCritere}
Soit $A$ un anneau intègre. Alors $A$ est intégralement clos si et seulement si il satisfait les deux conditions suivantes
\begin{enumerate}
\item Pour tout idéal premier de hauteur $\leq 1$, L'anneau local $A_\mathfrak{p}$ est régulier.
\item Les idéaux premiers associés d'un idéal principal non-nul sont de hauteur $1$.
\end{enumerate}
\end{thm}
\begin{proof}
Voir \cite{Matsumura} 23.8
\end{proof}

\begin{prop}\label{SerreCritere2}
Soit $k[x_1,...,x_n]$ un anneau de polynômes, et $f\in A$ un élément premier. Alors $A=k[x_1,...,x_n]/(f)$ satisfait la condition $2$ du théorème précédent. 
\end{prop}
\begin{proof}
Soit $\mathfrak{p}$ un premier associé de $A/(f)$, on veut montrer qu'il est de hauteur $1$. En remplaçant $A$ par sa localisation en $\mathfrak{p}$, on peut supposer $A$ local d'idéal maximal $\mathfrak{p}$. Par définition, il existe $g\in A\setminus (f) $ tel que $\mathfrak{p}=\lbrace x\in A\mid gx=0 \,\modu (f)$. Soit $y=g/f\in \fract(A)$. Si $y\mathfrak{p}\subset\mathfrak{p}$, c'est à dire $(x\in A$ et $gx=0 \,\modu (f))\implies (g/f)x=0\,\modu (f)$, ou encore $(g/f^n)x=0\,\modu (f)$ pour tout $n>0$. On en déduit $g\in (f)$, contradiction. Ainsi $y\mathfrak{p}=\mathfrak{p}$, ou encore $\mathfrak{p}=(f/g)$. Par le théorème de l'idéal principal de Krull (voir \ref{dimsousvariete}) on en déduit $\haut \mathfrak{p}=1$.
\end{proof}

\subsection{Lemme de normalisation de Noether et applications}

\begin{thm}[Lemme de normalisation de Noether]\label{NoetherNormalisation}
Soit $A$ une algèbre de type fini sur un corps quelconque $k$. Alors il existe des éléments $a_1,...,a_n\in A$ tels que $A$ soit une extension finie de $k[a_1,...,a_n]$.
\end{thm}
\begin{proof}
Voir \cite{MumfordRedBook} I.1
\end{proof}

\begin{thm}\label{IntClosureFinite}
Soit $A$ une algèbre de type fini intègre sur un corps $k$ quelconque, $K=\fract A$ son corps des fractions, et $K\rightarrow L$ une extension finie de $K$. Alors la clôture intégrale $\overline{A_L}$ de $A$ dans $L$ est une $k$-algèbre de type fini, et une extension finie de $A$.
\end{thm}
\begin{proof}
Voir \cite{Eisenbud} 4.14
\end{proof}

\begin{thm}[Nullstellensatz]\label{Nullstellensatz}
Soit $k$ un corps algébriquement clos, et $A=k[x_1,...,x_n]$ une algèbre de polynômes. Alors les idéaux maximaux de $A$ sont les $\mathfrak{m}_\alpha=(x_1-\alpha_1,...,x_n-\alpha_n)$ avec $\alpha=(\alpha_1,...,\alpha_n)\in k^n$.
\end{thm}
\begin{proof}
Voir \cite{Eisenbud} 4.14
\end{proof}

\begin{defn}[Dimension de Krull]
La dimension de Krull d'un anneau $A$, notée $\dim A$, est la borne supérieure des longueurs de chaînes d'idéaux premiers
$$\mathfrak{p}_0\varsupsetneq \mathfrak{p}_1 \varsupsetneq...\varsupsetneq  \mathfrak{p}_r$$
\end{defn}

\begin{thm}\label{FundamentalDimTheory}
Soit $A$ une algèbre de type fini intègre sur un corps $k$ quelconque, $K=\fract A$ son corps des fractions. Alors $\dim A=\trdeg_k A$.
\end{thm}
\begin{proof}
Voir \cite{Matsumura} 5.6
\end{proof}

\subsection{Anneaux locaux, Anneaux de valuation discrète}

\begin{defn}
Un anneau local noethérien $A$ de corps résiduel $k=A/\mathfrak{m}$ est régulier si $\dim A =\dim_k\mathfrak{m}/\mathfrak{m}^2$.
\end{defn}

\begin{prop}
Soit $A$ un anneau local noetherien. Alors $$\dim_k\mathfrak{m}/\mathfrak{m}^2\geq \dim A $$
\end{prop}
\begin{proof}
Voir \cite{Matsumura} V.14
\end{proof}

\begin{thm}
Soit $A$ un anneau local régulier, et $\mathfrak{p}$ un idéal premier. Alors $A_\mathfrak{p}$ est encore régulier.
\end{thm}
\begin{proof}
Voir \cite{Matsumura} VII.19.3
\end{proof}

\begin{thm}\label{reglocufd}
Un anneau local régulier est factoriel.
\end{thm}
\begin{proof}
Voir \cite{Matsumura} VII.20.3
\end{proof}

\begin{thm}\label{ideauxinversibles}
Soit $A$ un anneau intègre et $I$ un idéal fractionnaire de $A$. Les assertions suivantes sont équivalentes:
\begin{enumerate}
\item $I$ est inversible
\item $I$ est un $A$-module projectif
\item $I$ est de type fini, et pour tout idéal maximal $\mathfrak{m}$ de $A$, l'idéal fractionnaire $I_\mathfrak{m}$ de $A_\mathfrak{m}$ est principal.
\end{enumerate}
\end{thm}
\begin{proof}
Voir \cite{Matsumura} IV.11.3
\end{proof}

\subsection{Algèbres graduées}

On fixe dans cette partie un anneau $R$ et un monoïde abélien $K$. A partir de $K$ on peut construire le groupe des différences $K^{\pm}$ comme l'ensemble des paires $(w_1,w_2)\in K^2$ modulo la relation d'équivalence $(w_1,w_2)\sim (z_1,z_2)\iff w_1+z_2=w_2+z_1$. 

\begin{defn}[Algèbre graduée, élément homogène]
Une $R$-algèbre $A$ est $K$-graduée si on a une décomposition en somme directe de sous $R$-modules 
$$A=\bigoplus_{w\in K}A_w,\text{ où pour tout } w,w'\in K\text{, on a }A_wA_{w'}\subset A_{w+w'}$$
Un élément $f\in A$ est $K$-homogène de degré $w$ si $f\in A_w$.

Un morphisme d'une algèbre $K$-graduée $A$ vers une algèbre $K'$-graduée $A'$ est une paire $(\psi,\widetilde{\psi})$, où $\psi:A\rightarrow A'$ est un morphisme de $R$-algèbres, $\widetilde{\psi}:K\rightarrow K'$ est un morphisme de monoïdes, et
$$\psi(A_w)\subset A'_{\widetilde{\psi}(w)}, \forall w\in K$$  
\end{defn}

\begin{defn}[Module gradué]
Soit $A$ une $R$-algèbre $K$-graduée, et $M$ un $A$-module. $M$ est $K$-gradué si on a une décomposition en somme directe de sous-groupes
$$M=\bigoplus_{w\in K}M_w,\text{ où pour tout } w,w'\in K\text{, on a }R_wM_{w'}\subset M_{w+w'}$$
Un morphisme $\psi:M\rightarrow M'$ de $A$-modules gradués est un morphisme de $A$-modules tel que l'on ait $\psi(M_w)\subset M'_w$, pour tout $w\in K$.
\end{defn}

\begin{defn}[Idéal homogène]
Soit $A$ une $R$-algèbre $K$-graduée. Un idéal $\mathfrak{a}$ de $A$ est homogène si c'est un sous-module gradué de $A$.
\end{defn}

\begin{prop}
Un idéal $\mathfrak{a}$ de $A$ est homogène si et seulement si il est engendré par des éléments homogènes.
\end{prop}

\begin{rem}
Soit $A$ une $R$-algèbre $K$-graduée et $\mathfrak{a}$ un idéal homogène. Alors, $A/\mathfrak{a}$ est une $R$-algèbre $K$-graduée, et la projection est un morphisme de $R$-algèbres $K$-graduées, le morphisme $K\rightarrow K$ associé étant l'identité.
\end{rem}

\begin{defn}[Monoïde de poids]
Soit $A$ une $K$-algèbre graduée. Le monoïde de poids de $A$ est le sous-monoïde $S(A)\subset K$ engendré par les éléments $w\in K$ tels que $A_w\neq \lbrace 0 \rbrace$. Le groupe de poids de $A$ est le groupe sous-groupe $K(A)\subset K^{\pm}$ engendré par $S(A)$.
\end{defn}

\begin{rem}
Si $A$ est intègre, alors $S(A)=\lbrace w\in K\mid A_w\neq \lbrace 0\rbrace\rbrace$.
\end{rem}

\begin{prop}\label{GradedProp1}
Soit $A$ une $R$-algèbre $\ZZ^r$-graduée telle que $ff'\neq 0$ pour tout $f,f'\in A$ non-nuls. Alors
\begin{enumerate}
\item $A$ est intègre
\item Si $gg'$ est homogène pour deux éléments non-nuls $g,g'\in A$. Alors $g$ et $g'$ sont homogènes.
\item Tout élément inversible est homogène.
\end{enumerate}
\end{prop}
\begin{proof}
On se donne un ordre lexicographique sur $\ZZ^r$, et deux éléments $g,g'\in A$. On écrit les décompositions en éléments homogènes $g=\sum f_u$ et $g'=\sum f'_u$. Alors la composante maximale (resp.minimale) de $gg'$ est $f_wf'_{w'}\neq 0$ où $f_w$ et $f'_{w'}$ sont les composantes maximales (resp.minimales) de $g$ (resp. $g'$). Cela prouve les deux premières assertions. Pour la troisième, on observe que $1\in A$ est nécessairement homogène de degré zéro.
\end{proof}



\section{Schémas}

Notre principale référence est \cite{Hartshorne}. On résume dans cette partie certains faits et définitions. 

\subsection{Généralités}

Soit $A$ un anneau, on note $X=\spec A$ l'ensemble de ses idéaux premiers, il est naturellement muni d'une topologie en définissant que les fermés sont les parties de la forme $\Vv_X(\mathfrak{a})=\supp A/\mathfrak{a}=\lbrace \mathfrak{p}\in X\mid \mathfrak{a}\subset \mathfrak{p}\rbrace$, où $\mathfrak{a}$ est un idéal de $A$. On munit $X$ d'un faisceau d'anneaux $\Oo_X$, dit faisceau structural, constitué pour tout ouvert $U\subset X$ des sections $s: U\mapsto \bigsqcup_{\mathfrak{p}\in U}A_\mathfrak{p}$ telles que $s(\mathfrak{p})\in A_\mathfrak{p}$, et pour tout $\mathfrak{p}\in U$, il existe un voisinage $V\subset U$ de $\mathfrak{p}$ et des éléments $a,f\in A$ tels que pour tout $\mathfrak{q}\in V$, on ait $f\notin \mathfrak{q}$ et $s(\mathfrak{q})=a/f\in A_\mathfrak{q}$. Les sections $s$ sur un ouvert $U$ sont appelées les fonctions régulières sur $U$. On peut définir le même faisceau structural d'une manière différente en remarquant que $X$ possède une base d'ouverts, dits principaux, de la forme $X_f:=X\setminus \Vv_X((f))$ avec $f\in A$. En effet, si $X_f\subset X_g$, alors on a une application canonique $A_g\rightarrow A_f$. On pose alors $\Oo(X_f)=A_f$ et on vérifie grâce aux propriétés $(A_f)_g\simeq A_{fg}$ et $X_{fg}=X_f\cap X_g$ que cela définit bien un "faisceau" sur cette base d'ouverts. qui se prolonge donc de manière unique en un faisceau sur $X$. En particulier on obtient immédiatement $A=\Gamma(X, \Oo_X)$, et sans difficulté $\Oo_{X,\mathfrak{p}}\simeq A_\mathfrak{p}$. 

\begin{defn}[Espace annelé]
Un espace annelé est un espace topologique $X$ muni d'un faisceau d'anneau $\Oo_X$ tel que les tiges $\Oo_{X,x}$ soient des anneaux locaux en tout point $x\in X$.

Un morphisme d'espaces annelés $(f, f^\sharp):(X,\Oo_X)\rightarrow (Y,\Oo_Y)$ est une application continue $f:X\rightarrow Y$ et un morphisme $f^\sharp:\Oo_Y\rightarrow f_*\Oo_X$ tel que les morphismes induits entre les tiges soient locaux, c'est à dire $f^{\sharp -1}_x(\mathfrak{m}_x)=\mathfrak{m}_{f(x)}$ pour tout $x\in X$.
\end{defn}

\begin{defn}[Schéma affine, schéma]
Un schéma affine est un espace annelé isomorphe au spectre d'un anneau muni de son faisceau structural. Un schéma est espace annelé $(X,\Oo_X)$ tel que tout point $x\in X$ admet un voisinage ouvert $U$ tel que $(U,\Oo_U)$ soit un schéma affine. Un morphisme de schémas est un morphisme d'espaces annelés.
\end{defn}

Tout morphisme d'anneaux $\phi:A\rightarrow B$ définit un morphisme de schémas affines $(f,f^\sharp):\spec B\rightarrow\spec A$. En effet, on pose $f(\mathfrak{p}):=\phi^{-1}(\mathfrak{p})$ pour tout $\mathfrak{p}\in \spec B$. Puis, pour tout ouvert $V\subset \spec A$, $s\in\Oo_{\spec A}(V)$, et $\mathfrak{p}\in f^{-1}(V)$, on pose $f^\sharp(s)(\mathfrak{p}):=\phi_{\mathfrak{p}}\circ s \circ f(\mathfrak{p})$, où $\phi_{\mathfrak{p}}:A_{f(\mathfrak{p})}\rightarrow B_{\mathfrak{p}}$ est la localisation de $\phi$.
Réciproquement, tout morphisme entre schémas affines $f:\spec B\rightarrow \spec A$ définit un morphisme d'anneaux en prenant les sections globales $\Gamma(\spec A, f^\sharp):A\rightarrow B$. Ces deux procédés sont inverses l'un de l'autre et on obtient:


\begin{prop}\label{EqCat}
Les foncteurs $\spec$ et $\Gamma(.)$ définissent une anti-équivalence de catégories entre la catégorie des schémas affines et la catégorie des anneaux (commutatifs).
\end{prop}

Soit $X$ un schéma, on peut étendre l'opération $\Vv_X(.)$ définie plus haut pour les schémas affines. On considère un faisceau d'idéaux $\Ii$ de $\Oo_X$, et on pose $\Vv_X(\Ii)=\supp \Oo_X/\Ii$. De même, soit $f\in \Oo(X)$ une fonction régulière sur $X$, et $x$ un point de $X$. On dit que $f$ s'annule en $x$ si son germe n'est pas inversible dans l'anneau local $\Oo_{X,x}$. Soit $U\simeq\spec A$ un voisinage affine de $x$, on a un isomorphisme canonique $\Oo_{X,x}\simeq A_\mathfrak{p}$, où $\mathfrak{p}$ est l'idéal premier correspondant à $x$. Alors $f$ s'annule en $x$ revient à dire que $f_{|U}\in \mathfrak{p}$. On peut alors définir l' idéal des fonctions régulières sur $X$ s'annulant sur un fermé $F$ de $X$, on le note $\Ii_X(F)$, c'est un idéal radical. Si $X=\spec A$ est un schéma affine, on a alors pour un idéal $\mathfrak{a}$ et une partie $Y$ de $X$ les formules
$$\Ii_X(Y)=\bigcap_{\mathfrak{p}\in Y}\mathfrak{p},\,\,\,\,\, \Ii_X(\Vv_X(\mathfrak{a}))=\sqrt{\mathfrak{a}},\,\,\,\,\,\,\Vv_X(\Ii_X(Y))=\overline{Y}$$

\begin{rem}
On remarque que si on considère une algèbre affine, c'est à dire une $k$-algèbre de type fini réduite, et que l'on suppose de plus le corps algébriquement clos. Alors si l'on remplace "premier" par "maximal" dans les formules ci-dessus relatives aux opérations $\Vv$ et $\Ii$, on retombe sur les définitions classiques de ces opérations qui donnent les ensemble algébriques et leurs équations dans un espace affine de dimension finie sur $k$. En effet le Nullstellensatz assure dans ce cas que les points de l'ensemble algébrique correspondent aux idéaux maximaux de l'algèbre et que $\Ii(Y)=\bigcap_{y\in Y}\mathfrak{m}_y$.

Par ailleurs, une fonction régulière $s$ sur un ouvert $U$ d'un schéma $X$ peuvent être vue comme une fonction à valeurs dans les différents corps résiduels $A_\mathfrak{p}/\mathfrak{p}A_\mathfrak{p}$ pour chaque $\mathfrak{p}\in U$ en prenant $s(\mathfrak{p})$ modulo $\mathfrak{p}A_\mathfrak{p}$. Dans le cas d'une variété affine, c'est à dire $X=\spec A$ où $A$ est une $k$-algèbre affine sur un corps algébriquement clos, tous les corps résiduels sont isomorphes à $k$. D'après le Nullstellensatz, l'évaluation de $s\in A$ en les points fermés, c'est à dire les idéaux maximaux, coïncide avec l'évaluation de $s$ en les points correspondants de l'ensemble algébrique associé à $A$. Enfin, considérons deux $k$-algèbres affines $A$ et $B$ sur un corps algébriquement clos, et $X, Y$ les variétés affines correspondantes. Étant donné un morphisme $f:X\rightarrow Y$, le morphisme de $k$-algèbres correspondant s'identifie à $\phi:A\rightarrow B,s\mapsto s\circ f$. En considérant $X$ et $Y$ plongés dans un espace affine et en prenant pour $s$ les différentes coordonnées de $Y$ on retrouve la définition classique des morphismes entre ensembles algébriques, c'est à dire telles que sur sur chaque coordonnées les applications soient polynomiales.
\end{rem}

\begin{cons}[Recollement de schémas]\label{gluevar}
Soit $(X_i)_{u\in I}$ une famille de schémas. Supposons $\forall i,j$ on ait des ouverts $X_{ij}\subset X_i$ et des isomorphismes $f_{ij}:X_{ij}\rightarrow X_{ji}$ tels que $\forall i,j,k\in I$ on ait:
	\begin{enumerate}
	\item $X_{ii}=X_i$ et $f_{ii}=id$
	\item $f_{ij}^{-1}(X_{ji} \cap X_{jk}) =  X_{ij} \cap X_{ik}$
	\item Le diagramme suivant commute:
	$$
		\begin{tikzcd}
		  X_{ij}\cap X_{ik} \arrow[rd, "f_{ij}"] \arrow[rr, "f_{ik}"] & & X_{ki}\cap X_{kj}\\
  		 & X_{ji}\cap X_{jk} \arrow[ru, "f_{jk}"] &
	\end{tikzcd}
	$$
	\end{enumerate}
Alors on peut définir un schéma $X$ comme la réunion disjointe des $X_i$ modulo la relation d'équivalence $x\sim x' \iff (x\in X_{ij}, x'\in X_{ji}$ et $f_{ij}(x)=x')$. On note $f_i:X_i\rightarrow X$ les applications canoniques, et on munit 
$X$ de la topologie finale associée aux $f_i$. On vérifie que chaque $f_i$ est une immersion ouverte dont on note $U_i$ l'image. Le faisceau structural est définit en recollant les $\mathcal{O}_{U_i}:=f_{i\star}\mathcal{O}_{X_i}$, ses sections sur un ouvert $W\subset X$ étant $$
\mathcal{O}_X(W) =
\{
(s_i)_{i \in I} \mid
s_i \in \mathcal{O}_{U_i}(W \cap U_i),
f_{ij}(s_i|_{W \cap U_i \cap U_j}) = s_j|_{W \cap U_i \cap U_j}
\}
$$
\end{cons}


\begin{defn}
Soit $S$ un schéma. Un $S$-schéma, où schéma sur $S$, est un schéma $X$ muni d'un morphisme $X\rightarrow S$ appelé morphisme structural.
\end{defn}

Soit $S$ un schéma de base. Les $S$-schémas forment une sous-catégorie où l'on demande que morphismes soient compatibles avec les morphismes structuraux. Le produit existe dans cette catégorie, on l'appelle le produit fibré sur $S$. Cette construction se fait par recollement en remarquant que pour des schémas affines $X,Y$ sur un schéma affine $S$, le produit fibré $X\times_S Y$ est naturellement $\spec (\Oo_X(X)\otimes_{\Oo_S(S)}\Oo_Y(Y))$. En effet, cela vient de \ref{EqCat} et du fait que le produit tensoriel sur $\Oo_S(S)$ est le co-produit dans la catégorie des $\Oo_S(S)$-algèbres. 
Comme tout anneau est naturellement une $\ZZ$-algèbre, tout schéma est naturellement un schéma sur $\spec \ZZ$. Le produit de deux schéma est par définition le produit sur $\spec \ZZ$.

\subsection{Quelques propriétés des schémas}

\subsubsection{Schémas réduits, irréductibles, intègres, noetheriens}

\begin{defn}[Schéma réduit]
Un schéma $X$ est réduit si pour tout $x\in X$ les anneaux locaux $\Oo_{X,x}$ sont réduits. 
\end{defn}

\begin{prop}
Un schéma $X$ est réduit si et seulement si pour tout ouvert $U\subset X$, l'anneau $\Oo(U)$ est réduit.
\end{prop}
\begin{proof}
Supposons $X$ réduit et $f\in \Oo(U)$ nilpotent. Si $f$ est non-nul, alors il existe un germe $f_x$ non-nul pour un point $x\in U$. Mais alors $f_x^n=0$ pour un $n>0$, et donc $f_x=0$, contradiction.
Réciproquement, soit $f_x\in \Oo_{X,x}$ nilpotent alors $f_x$ est la classe d'une fonction nilpotente $f\in \Oo(U)$ pour un ouvert $U\subset X$. Cela implique $f_x=0$.
\end{proof}

\begin{defn}[Schéma irréductible]
Un schéma irréductible si l'espace topologique sous-jacent est irréductible, c'est à dire qu'il est non vide et n'est pas réunion de deux fermés propres.
\end{defn}

\begin{defn}[Schéma noetherien]
Un schéma $X$ est noetherien si c'est une union finie d'ouverts affines $U_i$ tels que $\Oo(U_i)$ est un anneau noetherien.
\end{defn}

\begin{prop}
Soit $X$ un schéma noetherien. Alors 
\begin{enumerate}
\item Les tiges de $X$ sont des anneaux noetheriens. Tout sous-schéma ouvert ou fermé de $X$ est noetherien.
\item $X$ est quasi-compact et $\Oo(U)$ est noetherien pour tout ouvert affine $U\subset X$.
\end{enumerate}
\end{prop}

Par le lemme de Zorn, on montre que l'ensemble des fermés irréductibles d'un schéma $X$ admet des éléments maximaux, appelés composantes irréductibles. Si $X$ est noetherien, ce nombre est fini. En effet, comme $X$ est quasi-compact, on peut le supposer affine, et le résultat découle de \ref{AssociatedPrimesProp1} car les composantes irréductibles correspondent aux idéaux premiers associés au $\Oo(X)$-module $\Oo(X)$ qui sont minimaux (c'est à dire ses idéaux premiers minimaux au sens large). Ainsi, $X$ s'écrit de manière unique comme réunion de ses composantes irréductibles. Pour tout point $x\in X$, les composantes irréductibles de $\spec \Oo_{X,x}$ correspondent bijectivement aux composantes irréductibles de $X$ passant par $x$.

\begin{prop}
Un schéma $X=\spec A$ un schéma affine, et $\mathfrak{a}$ un idéal.
\begin{enumerate}
\item $\Vv_X(\mathfrak{a})$ est irréductible si et seulement si $\sqrt{\mathfrak{a}}$ est premier.
\item Soit $(\mathfrak{p}_i)$ les premiers minimaux de $A$. Alors $(\Vv_X(\mathfrak{p}_i))_i$ sont les composantes irréductibles de $X$.
\item $X$ est irréductible si et seulement si $A$ admet un unique idéal premier minimal. Dans ce cas, cet idéal est nécessairement $(0)$, et $A$ est intègre.
\end{enumerate}
\end{prop}
\begin{proof}
On donne la preuve dans le cas où $X$ est noetherien. Dans ce cas, $\Vv_X(\mathfrak{a})$ est irréductible si et seulement si $\mathfrak{a}$ est irréductible, et dans ce cas, il est primaire, ce qui montre que $\sqrt{\mathfrak{a}}$ est premier. Réciproquement, si $\sqrt{\mathfrak{a}}$ est premier il est irréductible. Alors $\Vv_X(\mathfrak{a})=\Vv_X(\sqrt{\mathfrak{a}})$ est irréductible.
\end{proof}

\begin{defn}[Schéma intègre]
Un schéma est intègre si il est réduit et irréductible.
\end{defn}

\begin{prop}\label{SchemaIntegreCritere}
Un schéma $X$ est intègre si et seulement si $\Oo(U)$ est intègre pour tout ouvert $U\subset X$ non-vide.
\end{prop}

Un point $x$ d'un espace topologique $X$ est dit générique si $\overline{\lbrace x\rbrace}=X$. Ainsi, si $X$ admet un point générique, il est irréductible. Pour un schéma $X$ on a en fait une correspondance bijective entre fermés irréductibles de $X$ et points génériques donnée par $x\mapsto \overline{\lbrace x\rbrace}$. 

Un schéma affine $X=\spec A$ est intègre si et seulement si $A$ est intègre. Alors le point générique $\eta$ de $X$ correspond à l'idéal $(0)$, et $\Oo_{X,\eta}$ est la localisation $A_{(0)}$, c'est à dire le corps des fractions de $A$. Plus généralement, on définit le corps des fonctions rationnelles d'un schéma intègre $X$ comme les fonctions régulières sur un ouvert non-vide de $X$. Comme tout ouvert non-vide contient le point générique $\eta$ de $X$, il s'agit de $\Oo_{X,\eta}$ qui est bien un corps d'après ce qui précède. On le note $k(X)$.

\begin{prop}
Soit $X$ un schéma intègre et $k(X)$ son corps des fonctions rationnelles. 
\begin{enumerate}
\item Pour tous ouverts $U\subset V\subset X$ non-vides, les applications suivantes sont injectives
$$\Oo(V)\xhookrightarrow{res_{V,U}}\Oo(U)\xhookrightarrow{f\mapsto f_\eta} k(X)$$
\item Pour tout ouvert non-vide $U\subset X$ et tout recouvrement $U=\cup_i U_i$, on a dans $k(X)$:
$$\Oo(U)=\bigcap_i \Oo(U_i)=\bigcap_{x\in U}\Oo_{X,x}$$
\end{enumerate}
\end{prop}

\subsection{Quelques propriétés des morphismes de schémas}

\subsubsection{Immersion ouverte, immersion fermée}

\begin{defn}[Immersion ouverte, immersion fermée]
Un morphisme de schémas $(f,f^\sharp):X\rightarrow Y$ est une immersion ouverte (resp. fermée) si $f$ est une immersion ouverte topologique (resp. immersion fermée topologique), et si $f^\sharp_x:\Oo_{X,f(x)}\rightarrow \Oo_{X,x}$ est un isomorphisme (resp. surjective) pour tout $x\in X$.
\end{defn}

Soit $X=\spec A$ un schéma affine, et $g\in A$. Considérons l'ouvert $X_g$ de $X$, on note $i$ l'inclusion. Vu la construction du faisceau structural $\Oo_X$, on voit que $(X_f, i^{-1}\Oo_X)$, est naturellement un schéma isomorphe à $\spec A_g$. Grâce à cette observation, on voit que tout ouvert $U$ d'un schéma $X$ est naturellement muni d'une structure de schéma en prenant la restriction du faisceau structural, c'est la notion de sous-schéma ouvert. De plus, tout immersion ouverte $X\rightarrow Y$ se factorise à travers un sous-schéma ouvert.

\begin{defn}
Un schéma $X$ est quasi-affine si il est quasi-compact et il existe une immersion ouverte dans un schéma affine.
\end{defn}

Soit $X=\spec A$ un schéma affine, et $\mathfrak{a}$ un idéal de $A$. Alors la projection $A\rightarrow A/\mathfrak{a}$ définit une immersion fermée $i:\spec A/\mathfrak{a}\rightarrow X$ d'image $\Vv_X(\mathfrak{a})$. On a un isomorphisme canonique $(\Vv_X(\mathfrak{a}), i^{-1}(\Oo_X/\ker i^\sharp))\simeq \spec A/\mathfrak{a}$ et on remarque que $\ker i^\sharp(X_g)=\mathfrak{a}_g$. Réciproquement, pour tout immersion fermée $j:Z\rightarrow X$, il existe un unique idéal $\mathfrak{a}$ tel que $j$ se factorise via un isomorphisme $Z\simeq \spec A/\mathfrak{a}$ et l'immersion fermée $\spec A/\mathfrak{a}\rightarrow X$. Un sous-schéma fermé d'un schéma $X$ est un fermé $Z$ de $X$ muni d'une structure de schéma et d'une immersion fermée $Z\rightarrow X$. Ainsi les sous-schémas fermés de $X$ sont donnés par des faisceaux d'idéaux quasicohérents (voir partie consacrée aux faisceaux de modules).



\subsubsection{Morphismes de type fini}

\begin{defn}[Morphisme quasi-compact]
Un morphisme de schémas $f:X\rightarrow Y$ est quasi-compact si l'image réciproque tout ouvert affine de $Y$ est quasi-compact. 
\end{defn}

\begin{defn}[Morphisme de type fini]
Un morphisme de schémas $f:X\rightarrow Y$ est de type fini si il est quasi-compact et pour tout ouvert affine $V\subset Y$, et tout ouvert affine $U\subset f^{-1}(V)$, le morphisme canonique $\Oo_Y(V)\rightarrow \Oo_X(U)$ fait de $\Oo_X(U)$ une $\Oo_Y(V)$-algèbre de type fini. Un $S$-schéma est dit de type fini si son morphisme structural est de type fini.
\end{defn}

\begin{rem}
Pour qu'un morphisme soit de type fini il suffit qu'il existe un recouvrement par des ouverts affines qui satisfont la condition de la définition.
\end{rem}

\subsubsection{Morphismes finis, normalité}

\begin{defn}[Morphisme fini]
Soit $f:X \rightarrow Y$ un morphisme de schémas. On dit que $f$ est fini si pour tout ouvert affine $V$ de $Y$, si la $\Oo_Y(V)$-algèbre $(\Oo_X(f^{-1}(V)), f^\sharp(V))$ est finie.
\end{defn}

\begin{rem}
Pour qu'un morphisme soit fini il suffit qu'il existe un recouvrement par des ouverts affines qui satisfont la condition de la définition.
\end{rem}


\begin{defn}[Schéma normal]
Un point d'un schéma est dit normal si l'anneau local en ce point est intégralement clos.
Un schéma est dit normal si il est normal en chacun de ses points.
\end{defn}

\begin{prop}
Un schéma intègre $X$ est normal si et seulement si pour tout ouvert affine $U\subset X$ non-vide, $\Oo(U)$ est intégralement clos.
\end{prop}

Soit $X$ un schéma intègre, et $(U_i)_{i\in I}$ un recouvrement affine de $X$. Pour chaque $U_i=\spec A_i$ on pose $\widetilde{U}_i=\spec \widetilde{A}_i$ où $\widetilde{A}_i$ est la clôture intégrale de $A_i$, c'est naturellement un schéma intègre sur $U_i$. De plus, comme la normalisation commute à la localisation, on a des isomorphismes naturels $\widetilde{U_i\cap U_j}\simeq \widetilde{U_i}\cap \widetilde{U_j}$. On construit alors par recollement un schéma intègre et normal $\widetilde{X}$ sur $X$ qui satisfait de plus la propriété universelle que tout morphisme dominant d'un schéma intègre $Z$ vers $X$ se factorise de manière unique à travers $\widetilde{X}$. On dit que $\widetilde{X}$ est la normalisation de $X$. De plus, si $X$ est de type fini sur un corps $k$, alors d'après \ref{}, le morphisme structural de $\widetilde{X}$ est fini.

\subsubsection{Morphismes affines}

\begin{defn}[Morphisme affine]
Un morphisme de variétés algébriques $\phi: X\rightarrow Y$ est dit affine si pour tout ouvert affine $V\subset Y$, l'image réciproque $\phi^{-1}(V)$ est affine.
\end{defn}

\begin{ex}\label{exaff}
Un morphisme de schémas affines $\phi: X\rightarrow Y$ est affine. En effet, soit $V$ un ouvert affine de $Y$ et $U=\phi^{-1}(V)$. En considérant le diagramme commutatif ci-dessous on constate que l'on a $U \simeq (\phi\times i_2)^{-1}(\Delta_Y)=\lbrace (x,\phi(x))\mid x\in U \rbrace \subset X\times V$. Comme $X\times V$ est affine, $U$ aussi.
	\begin{center}
	\begin{tikzcd}
  		U \arrow[r, "\phi"] \arrow[d, "i_1"]& V \arrow[d, "i_2"] \\ 
  		X \arrow[r, "\phi"] & Y
	\end{tikzcd}\\
	\end{center}

\end{ex}

\subsubsection{Morphismes séparés}

\begin{defn}[Morphisme séparé, schéma séparé]
Soit $f:X\rightarrow Y$ un morphisme de schémas. Le morphisme diagonal $\Delta:X\rightarrow X\times_Y X$ est l'unique morphisme $X\rightarrow X\times_Y X$ tel que la composition avec les projections $p_1,p_2:X\times_Y X\rightarrow X$ est l'identité de $X$. On dit que $f$ est séparé si le morphisme diagonal est une immersion fermée.
Un $S$-schéma est séparé si son morphisme structural est séparé. En particulier un schéma est séparé si il est séparé sur $\spec\ZZ$.
\end{defn}

Les morphismes entre schémas affines sont séparés et en particulier les schémas affines sont séparés. En effet, considérons $X=\spec A$ et $Y=\spec B$, le morphisme diagonal est donné par $\rho: B\otimes_A B\rightarrow B, x\otimes 1\mapsto x, 1\otimes y \mapsto y$ qui est clairement surjectif, c'est donc une immersion fermée. Le critère suivant est utile et nous dit de plus que les intersections d'affines sont affines dans les schémas séparés.

\begin{prop}\label{sepCritere}
Soit $f:X\rightarrow S$ un morphisme de schémas.
	\begin{enumerate}
	\item Si $f$ est séparé, alors pour toute paire $(U,V)$ d'ouverts affines de $X$ dont les images sont contenues dans un même ouvert affine de $S$, l'ouvert $U\cap V$ est affine, et le morphisme naturel $\Oo(U)\otimes_\ZZ \Oo(V)\rightarrow\Oo(U\cap V), f\otimes g\mapsto f_{U\cap V}g_{U\cap V}$ est surjectif.
	\item Si pour toute paire $(x_1,x_2)$ de points de $X$ au-dessus d'un même point $s\in S$, on a des ouverts affines $x_1\in U$ et $x_2\in V$ dont l'image est contenue dans un même ouvert affine de $S$, et qui vérifient: l'ouvert $U\cap V$ est affine, et le morphisme naturel $\Oo(U)\otimes_\ZZ \Oo(V)\rightarrow\Oo(U\cap V), f\otimes g\mapsto f_{U\cap V}g_{U\cap V}$ est surjectif. Alors $f$ est séparé.
	\end{enumerate}
\end{prop}

\begin{prop}\label{sepCritere}
Soit $X$ un schéma. Les assertions suivantes sont équivalentes
	\begin{enumerate}
	\item $X$ est séparé
	\item Pour tous ouverts affines $U$ et $V$ de $X$, $U\cap V$ est affine et le morphisme naturel $\Oo(U)\otimes_\ZZ \Oo(V)\rightarrow\Oo(U\cap V), f\otimes g\mapsto f_{U\cap V}g_{U\cap V}$ est surjectif.
	\item Il existe un recouvrement affine $(U_i)$ tel que pour tout $i,j$, $U_i\cap U_j$ est affine et le morphisme naturel $\Oo(U_i)\otimes_\ZZ \Oo(U_j)\rightarrow\Oo(U_i\cap U_j), f\otimes g\mapsto f_{U_i\cap U_j}g_{U_i\cap U_j}$ est surjectif.
	\end{enumerate}
\end{prop}

\begin{prop}\label{sepCritere2}
Les deux assertions ci-dessous s'appliquent à des morphismes entre schémas noetheriens.
\begin{enumerate}
	\item Le morphisme composé de deux morphismes séparés est séparé.
	\item Les immersion ouvertes ou fermées sont séparées.
	\end{enumerate}
\end{prop}


\subsubsection{Morphismes propres}


\section{Variétés algébriques}

Dans ce mémoire, on travaille principalement dans la sous-catégorie des $k$-schémas réduits séparés de type fini sur $k$, où $k$ est un corps algébriquement clos fixé. Ces objets sont appelés des $k$-variétés algèbriques, ou tout simplement variétés.  Cette catégorie est équivalente à la catégorie des $k$-variétés algébriques au sens de \cite{LAGSpringer} en ne considérant que les points fermés. D'ailleurs, par un point d'une variété $X$, on entendra point fermé, sauf mention du contraire. Soit $X_0$ le sous espace des points fermés de $X$ muni de la topologie induite. Alors les treillis des ouverts des topologies de $X$ et $X_0$ sont isomorphes. On bénéficie ainsi des résultats sur les morphismes et la dimension démontrés par exemple dans \cite{LAGSpringer} ou \cite{MumfordRedBook} chap I. On rappel que le corps de base est supposé de caractéristique nulle.

Un schéma de type fini sur un corps est noetherien, on en déduit que toute partie localement fermée d'une variété admet une unique structure de variété, et tout fermé se décompose de manière unique en une union finie de composantes irréductibles. Enfin, le produit sur $k$ préserve l'irréductibilité.

\subsection{Dimension des variétés algébriques}

\subsubsection{Généralités}

\begin{defn}[Dimension d'une variété]
Soit $X$ une variété. La dimension de $X$ est la borne supérieure des longueurs de chaînes de parties fermées irréductibles
$$\emptyset \varsubsetneq Z_0 \varsubsetneq Z_1 \varsubsetneq ... \varsubsetneq Z_r$$
Soit $F\subset X$ un fermé irréductible. La codimension de $F$ dans $X$, notée $\codime_X F$ est la borne supérieure des longueurs de chaînes de parties fermées irréductibles
$$F \varsubsetneq Z_1 \varsubsetneq ... \varsubsetneq Z_r$$
\end{defn}

Soit $X$ une variété, et $X=\cup_{i=1}^rX_i$ sa décomposition en composantes irréductibles. Alors $\dim X=\sup_i \dim X_i$. De plus, si $X$ est irréductible (i.e $r=1$), alors pour tout ouvert $U\subset X$ non-vide, on a $\dim X=\dim U$, et pour tout fermé propre $F\subset X$, on a $\dim F<\dim X$. On se ramène ainsi à l'étude de la dimension des variétés affines. On suppose donc $X=\spec A$ affine. Par la correspondance entre fermés irréductibles de $X$ et idéaux premier de $A$ on obtient $\dim X= \dim A$, où $\dim A$ est la dimension de Krull de $A$. En particulier, comme $A$ est une $k$-algèbre de type fini intègre, on a d'après \ref{FundamentalDimTheory} le résultat fondamental
$$\dim X=\dim A=\trdeg_k \fract A$$
Cela assure en particulier que la dimension d'une variété est finie. Par ailleurs, la hauteur d'un idéal premier $\mathfrak{p}$ de $A$ correspond à la codimension de la sous-variété $F$ qu'il définit. Pour une $k$-algèbre de type fini intègre, on a $\haut \mathfrak{p}+ \dim A/\mathfrak{p}=\dim A$. On en déduit
$$\dim X=\dim F+\codime_X F,\,\,\,\,\,\,\, \text{ et } \dim X=\dim\Oo_{X,x} \text{, pour tout } x\in X \text{ (fermé)}$$

\begin{thm}\label{dimsousvariete}
Soit $X$ une variété irréductible, $U\subset X$ un ouvert non-vide et $f\in \Oo_X(U)$ non nul et non-inversible. Soit $Z$ une composante irréductible de $\Vv_U((f))$. Alors $\dime Z= \dime(X)-1$.
\end{thm}
\begin{proof}
Voir \cite{MumfordRedBook} I.7 Th.2, après réduction au cas $X$ affine, la preuve consiste en une réduction au cas facile où $\Oo(X)$ est factoriel. 
\end{proof}

Ce théorème peut aussi être vu comme une version géométrique du théorème de l'idéal principal de Krull qui assure les idéaux premiers minimaux sur un idéal principal d'un anneau noetherien sont au plus de hauteur $1$.

\subsubsection{Dimension des fibres d'un morphisme}

\begin{thm}\label{dimensionfibres}
Soit $f:X\rightarrow Y$ un morphisme dominant de variétés irréductibles. Alors il existe un ouvert $U\subset Y$ tel que
\begin{enumerate}
\item $U\subset f(X)$
\item Pour tout fermé irréductible $W\subset Y$ tel que $U\cap X\neq \emptyset$, et pour toute composante irréductible $Z$ de $f^{-1}(W)$  telle que $f^{-1}(U)\cap Z\neq \emptyset$, on a $\dim Z=\dim W + r$, où $r:=\dim X -\dim Y$
\end{enumerate}
En particulier, pour tout $Y\in U$, on a $\dim f^{-1}(y)=r.$
\end{thm}
\begin{proof}
(Voir \cite{MumfordRedBook} I.8.3) Après réduction au cas où $X$ et $Y$ sont affines. On utilise le lemme clé \ref{NoetherNormalisation} pour obtenir une factorisation de $f$ de la forme 
$$X_g\xrightarrow{\pi \text{ fini et surjectif}}U\times \AAA^r \xrightarrow{p_U}U:=Y_g$$

\end{proof}

On s'intéresse maintenant aux morphismes dont les fibres sont des ensembles finis. Cette étude s'achève avec un résultat important pour la suite, on obtient un critère pour qu'un morphisme bijectif en caractéristique zéro soit un isomorphisme. 

\begin{defn}[Morphisme quasi-fini]
Soit $f:X \rightarrow Y$ un morphisme de variétés. On dit que $f$ est quasi-fini si les fibres de $f$ sont finies.
\end{defn}

\begin{ex}
Un morphisme fini de variété algébriques est quasi-fini.
\end{ex}

\begin{thm}[Théorème principal de Zariski]\label{ZMT}
Soit $f:X\rightarrow Y$ un morphisme birationnel quasi-fini séparé de variétés irréductibles. On suppose de plus que $Y$ est normale. Alors $f$ est une immersion ouverte.
\end{thm}
\begin{proof}
Voir \cite{QingLiu} 4.4.6
\end{proof}

\begin{prop}\label{fibersCardinal}
Soient $X,Y$ deux variétés algébriques affines irréductibles de même dimension et $f:X \mapsto Y$ un morphisme dominant. Alors il existe $g\in \Oo(Y)$ non nul tel que le morphisme induit $f:X_g \mapsto Y_g$ soit fini, surjectif avec des fibres de même cardinal.
\end{prop}
\begin{proof}
Par hypothèse, l'extension $k(Y) \xrightarrow{f^*} k(X)$ est algébrique finie, disons de degré $n$. En caractéristique zéro on peut trouver $u\in k(X)$ tel que $k(X)=k(Y)[u]$. On remarque que l'on peut imposer $u\in \Oo(X)$. On considère $P:=P_{min}(u, k(Y))=t^n+a_1t^{n-1}+...+a_0$. En réduisant au même dénominateur on a $P\in \Oo(Y)_v[t]$ pour un $v\in \Oo(Y)$. De plus, en prenant l'intersection avec d'autres ouverts principaux on peut supposer $\Oo(X)_v$ entier sur $\Oo(Y)_v$, et $\Oo(Y)_v[u]$ intégralement clos, ce qui donne $\Oo(Y)_v[u]=\Oo(X)_v$ et $\Oo(X)_v$ entier sur $\Oo(Y)_v$. Ainsi $f:X_v \rightarrow Y_v$ est fini et donc surjectif car dominant.

On a donc une factorisation de $f^\sharp(Y_v):\Oo(Y)_v\xrightarrow{p_1^\sharp}\Oo(Y)_v[t]\xrightarrow{\pi}\Oo(Y)_v[t]/(P)\xrightarrow{\overline{ev_u}}\Oo(Y)_v[u]$ qui donne $f:X_v \xrightarrow{\simeq} \lbrace (y,t) \in Y_v\times \mathbb{A}^1\mid P(y)(t)=0\rbrace \hookrightarrow Y_v\times \mathbb{A}^1 \xrightarrow{p_1} Y_v$. Ainsi, pour $y\in Y_v$ donné, le cardinal de la fibre $f^{-1}(y)$ est le cardinal de l'ensemble des zéros du polynôme $P(y)(t)$. On peut s'assurer que cet ensemble est de cardinal constant en intersectant à nouveau avec l'ouvert principal du discriminant de $P$ qui est un polynôme en les coefficients de $P$.
\end{proof}

Ce résultat reste vrai en caractéristique positive, voir \cite{LAGSpringer} 5.1.6 pour une preuve légèrement différente dans ce cadre. On y montre que le cardinal de la fibre générale est $[k(X):k(Y)]_s$. En revanche pour le corollaire immédiat suivant, la caractéristique zéro est essentielle (penser par exemple au morphisme de Frobenius $\AAA^1 \xrightarrow{x \mapsto x^p} \AAA^1$ ). 

\begin{cor}[Car. zéro]\label{injectiveBirationel}
Avec les hypothèses de \ref{fibersCardinal}, si de plus $f$ est injectif, alors il existe $g\in \Oo(Y)$ non-nulle tel que le morphisme induit $f:X_g \mapsto Y_g$ soit un isomorphisme.
\end{cor}

\begin{thm}[Car. zéro]\label{ZMTCor}
Soit $f:X \mapsto Y$ un morphisme bijectif de variétés irréductibles avec $Y$ normale. Alors $f$ est un isomorphisme.
\end{thm}
\begin{proof}
D'après \ref{dimensionfibres} on peut appliquer \ref{injectiveBirationel} et on obtient ainsi que $f$ est birationnel. Ensuite, \ref{ZMT} nous dit que $f$ est une immersion ouverte. Mais $f$ est surjective par hypothèse, c'est donc un isomorphisme.
\end{proof}

\subsection{Variétés lisses}

\begin{defn}[Variété lisse, point régulier]
Soit $X$ une variété. On dit que $x\in X$ est un point régulier si l'anneau local $\Oo_{X,x}$ est régulier. On dit que la variété est lisse si chacun de ses points est régulier. Un point est singulier si il n'est pas régulier.
\end{defn}

Par définition, un point $x$ d'une variété $X$ irréductible est régulier si l'espace tangent $(\mathfrak{m}_x/\mathfrak{m}_x^2)^*$ en $x$ est de dimension $\dim X$. L'ensemble des point singuliers de $X$ est un fermé propre. Dans le cas d'une variété normale, ce fermé est de codimension $\geq 2$ comme on le verra en \ref{codimesingnormal}, on dit dans ce cas que la variété est régulière en codimension $1$. Cela explique d'ailleurs la nécessité de la condition $1$ de \ref{SerreCritere}. Réciproquement, le théorème \ref{reglocufd} entraine qu'un point lisse est un point normal. On dispose d'un critère effectif pour déterminer si un point d'une variété est lisse.

\begin{prop}\label{CritereReg}
Soit $X$ une variété affine que l'on peut supposer plongée dans $\AAA^n$ avec des équations $f_1,...f_t\in k[x_1,...,x_n]$. Un point $p$ de $X$ est régulier si et seulement si le rang de la matrice $((\partial f_i/\partial x_j)(p))_{i,j}$ est $n-r$, où $r:=\dim X$.
\end{prop}
\begin{proof}
Voir \cite{Hartshorne} I.5.1
\end{proof}


\subsection{Propriétés des variétés normales}

\begin{prop}\label{normaluniondisjointe}
Une variété normale est union disjointe de ses composantes irréductibles.
\end{prop}
\begin{proof}
Si un point $p\in X$ d'une variété se situe à l'intersection de deux composantes irréductibles, l'anneau local en $p$ contient au moins deux premiers minimaux et n'est donc pas intègre.
\end{proof}

\begin{prop}\label{codimesingnormal}
Le lieu singulier d'une variété normale est un fermé de codimension $\geq 2$
\end{prop}
\begin{proof}
Supposons par l'absurde qu'il existe une composante irréductible $Y$ de $X_{\text{sing}}$ de codimension $1$ dans $X$, et notons $\eta_Y$ son point générique. La tige $\Oo_{X,\eta_Y}$ est un anneau de valuation discrète car il est local noetherien normal et de dimension $1$. Soit $\pi$ une uniformisante de cet anneau, il existe donc un ouvert affine $U$ contenant $\eta_Y$ tel que $Y':=Y\cap U=\Vv_U((\pi))$. Maintenant, $Y'$ en tant que sous-variété contient au moins un point non-singulier $y$. L'anneau local $\Oo_{Y',y}$ est régulier, c'est à dire que l'on a des paramètres locaux $u_1,...,u_{n-1}\in\mathfrak{m}_{Y',y}$ tels que leur image forment une base du $k$-espace vectoriel $\mathfrak{m}_{Y',y}/\mathfrak{m}_{Y',y}^2$. Comme $\Oo_{Y',y}\simeq \Oo_{U,\eta_Y}/(\pi)$, on voit que $\mathfrak{m}_{U,y}$ est engendré par $(v_1,...,v_{n-1},\pi)$, où les éléments $v_i$ sont des antécédents des éléments $u_i$ par la projection dans le quotient $\Oo_{U,\eta_Y}/(\pi)$. Ainsi $\dim_k \mathfrak{m}_{U,y}/\mathfrak{m}_{U,y}^2\leq n$ ce qui prouve que $y$ est un point régulier de $X'$ appartenant à $Y$, contradiction.
\end{proof}


\begin{prop}\label{extregularnormal}
Soit $X$ une variété normale irréductible. Pour toute sous-variété fermée $Y$ de codimension $\geq 2$, la restriction $\Oo(X)\rightarrow \Oo(X\setminus Y)$ est un isomorphisme.
\end{prop}
\begin{proof}
On peut traiter le problème localement et supposer $X=\spec A$ affine. On considère $f$ régulière sur $U:=X\setminus Y$. On remarque que tout $\mathfrak{p}\in \spec A$ de hauteur $1$ est un point de $U$. En effet, dans le cas contraire il contiendrait les idéaux premiers correspondants aux composantes irréductibles de $Y$, ce qui est impossible car ils sont de hauteur $\geq 2$. On en déduit, en tenant compte de l'irréductibilité de $X$, des injections $\Oo_X(U)\xhookrightarrow{} \Oo_\mathfrak{p}=A_\mathfrak{p}$ dans les tiges qui peuvent être vues comme des inclusions dans le corps des fonctions rationnelles de $X$. On a ainsi en tenant compte de \ref{factonormal} un morphisme $\Oo_X(U)\xhookrightarrow{} \cap_\mathfrak{p} A_\mathfrak{p}=A=\Oo(X)$ qui est inverse de la restriction, d'où le résultat.
\end{proof}

\begin{prop}\label{codimaffinenormal}
Soit $X$ une variété affine irréductible. Pour toute variété irréductible $Y$ contenant $X$ comme ouvert, le complémentaire $Y\setminus X$ est de codimension 1.
\end{prop}
\begin{proof}
On considère l'application de normalisation $\eta_Y$. Alors l'application induite $\eta_Y^{-1}(X)\rightarrow X$ est l'application de normalisation de $X$. On en déduit que $\eta_Y^{-1}(X)$ est affine. De plus, comme $\eta_Y$ est finie, la dimension du complémentaire de $X$ ne change pas en remplaçant $Y$ par sa normalisation et $X$ par sa préimage. On peut donc supposer $Y$ normal.

Quitte à soustraire de $Y$ les composantes irréductibles de codimension $1$ de $Y\setminus X$, on peut supposer $\codime_Y(Y\setminus X)\geq 2$. Soit $V$ un ouvert affine de $Y$. Par irréductibilité de $Y$, on a $U:=X\cap V$ non-vide et $\codime_V(V\setminus U)=\codime_Y(Y\setminus X)\geq 2$. Ainsi d'après \ref{extregularnormal}, la restriction $\Oo(V)\rightarrow \Oo(U)$ est un isomorphisme. Comme $U$ et $V$ sont affines, cela signifie que l'inclusion $U\subset V$ est un isomorphisme, d'où $U=V$ puis $X=Y$.
\end{proof}


